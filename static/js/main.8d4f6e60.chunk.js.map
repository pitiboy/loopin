{"version":3,"sources":["DefaultLooperRenderer.tsx","ControlButton.tsx","LooperControls.tsx","LooperStyles.tsx","model/types.ts","model/stores/TrackStore.ts","model/stores/MetronomeStore.ts","model/stores/index.ts","Looper.tsx","Controls/Metronome.tsx","SquareLooperRenderer.tsx","Layout/Section.tsx","Layout/PianoKeyboard.tsx","Controls/RootControls.tsx","Controls/MicRecorder.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["DefaultRythmStyles","styled","div","DefaultBeatStyles","props","active","playBeat","step","map","beat","index","key","ControlButton","button","LooperControlStyles","LooperControls","muted","setMuted","onClick","PlayTypes","TrackType","LooperStyles","Name","b","defaultArray","flattenArray","array","slice","concat","apply","TrackStore","track","console","log","this","tracks","t","name","filter","type","drum","drums","instrument","bass","bassers","recording","observable","divider","playType","oddQuarter","even","pitches","duration","odd","computed","action","_add","bind","_remove","_update","MetronomeStore","stores","trx","mtn","createContext","bpm","metronomeBpm","looping","rythmLength","originalPlayBeat","source","renderProp","render","multiplier","getStep","useContext","StoreContext","LooperRenderer","DefaultLooperRenderer","useState","length","Array","fill","_qwe","evenQuarter","first","last","all","generatePlayBeat","setPlayBeat","useEffect","mute","thisPlayBeat","rythmDivider","defaultRrythmLength","children","Date","start","setStart","setStep","metronome","setMetronome","interval","clearTimeout","setInterval","diff","getTime","newStep","Math","floor","calculateStep","newChildren","React","Children","child","cloneElement","RythmStyles","BeatStyles","enabled","newPlayBeat","updateBeat","section","title","playNote","firstNote","MidiNumbers","fromNote","lastNote","keyboardShortcuts","KeyboardShortcuts","create","keyboardConfig","HOME_ROW","noteRange","stopNote","midiNumber","width","document","body","clientWidth","RootControlsStyles","recorder","Recorder","wasmURL","setRecording","ready","setReady","startRecording","a","initAudio","initWorker","stopRecording","blob","size","URL","createObjectURL","setTimeout","controls","src","kind","App","observer","midiDrums","useRef","midiBass","midiKeys","pianoChord","setPianoChord","myBPM","setMyBPM","playChord","current","playPitches","playChordNow","className","value","onChange","e","parseInt","target","min","max","RootControls","Metronome","Section","ref","appElementName","drumInstrumentIds","Looper","playDrumsNow","SquareLooperRenderer","instruments","bassersInstrumentIds","chord","recordings","MicRecorder","cacheInstrument","player","loader","waitLoad","PianoKeyboard","note","Boolean","window","location","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","then","registration","unregister"],"mappings":"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","file":"static/js/main.8d4f6e60.chunk.js","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport { LooperRendererProps, BeatStylesProps } from './Looper';\n\n\nexport const DefaultRythmStyles = styled.div`\n  display: flex;\n`;\n\nexport const DefaultBeatStyles = styled.div<BeatStylesProps>`\n  ${props => props.active && `\n    color: green;\n    font-weight: bold;\n  `}\n`;\n\nexport default ({ playBeat, step }: LooperRendererProps) => (\n  <DefaultRythmStyles>\n    {(playBeat && playBeat.map((beat, index) => <DefaultBeatStyles active={index === step} key={index}>{beat}</DefaultBeatStyles>)) || null}\n  </DefaultRythmStyles>\n);\n","import styled from 'styled-components';\n\n// TODO: xstate\n\nexport interface ControlButtonProps {\n  active?: boolean;\n}\n\nexport const ControlButton = styled.button<ControlButtonProps>`\n  background-color: lightgray;\n  border: solid 1px gray;\n  border-radius: 4px;\n\n  ${props => props.active && `\n    background-color: green;\n  `}\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { ControlButton } from './ControlButton';\n\nexport const LooperControlStyles = styled.div`\n  display: flex;\n`;\n\nexport const LooperControls = ({ muted, setMuted }: { muted: boolean; setMuted: (a: boolean) => void; name?: string}) => (\n  <LooperControlStyles>\n    <ControlButton onClick={() => setMuted(!muted)} active={muted}>Mute</ControlButton>\n  </LooperControlStyles>\n);\n","import styled from 'styled-components';\nimport { LooperControlStyles } from './LooperControls';\n\nconst LooperStyles = styled.div`\n  display: flex;\n\n  * {\n    flex: 1 1 auto;\n  }\n\n  ${LooperControlStyles} {\n    flex: 0 0 auto;\n  }\n`;\n\nexport const Name = styled.b`\n  flex: 0 0 auto;\n  width: 100px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n`;\n\nexport default LooperStyles;\n","export type PlayBeatType = number[];\n\nexport enum PlayTypes {\n  all = 'all',\n  odd = 'odd',\n  even = 'even',\n  oddQuarter = 'quarter',\n  evenQuarter = 'evenQuarter',\n  first = 'first',\n  last = 'last',\n}\n\n\nexport enum TrackType {\n  // instruments\n  drum = 110,\n  bass = 120,\n  string = 130,\n  key = 190,\n  // brass\n  // pad\n\n  recording = 101,\n  other = 900,\n}\n","import {\n  computed, observable, action,\n} from 'mobx';\nimport { PlayTypes, PlayBeatType, TrackType } from '../types';\n\nexport interface TrackControlProps {\n  name: string;\n  // TODO\n  muted?: boolean;\n}\n\nexport interface PitchedSound {\n  pitches?: number[];\n  duration?: number;\n}\n\nexport interface MidiSoundCondfigProps {\n  instrument: number;\n}\n\nexport interface SoundConfigProps extends MidiSoundCondfigProps{\n  type: TrackType;\n  divider: number;\n  playType?: PlayTypes;\n  playSound?: () => void;\n}\n\ninterface TrackSoundProps extends SoundConfigProps, PitchedSound {\n  // TODO\n  playBeat?: PlayBeatType;\n}\n\n\ninterface TrackProps extends TrackSoundProps, TrackControlProps {\n\n}\n\nconst defaultArray: number[] = [];\nconst flattenArray = (array: (number | number[])[]) => defaultArray.slice().concat.apply([], array);\n\n\n// https://stackoverflow.com/questions/52641907/how-to-get-mobx-decorators-to-work-with-create-react-app-v2\nexport default class TrackStore {\n  // constructor() {\n  // }\n\n\n  @observable tracks: TrackProps[] = [{\n    name: 'kickdrum',\n    type: TrackType.drum,\n    instrument: 1,\n    divider: 2,\n    playType: PlayTypes.oddQuarter,\n    muted: true, // TODO: disable\n  },\n  {\n    name: 'kickdrum variety',\n    type: TrackType.drum,\n    instrument: 1,\n    divider: 2,\n    playBeat: [0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1],\n    muted: true, // TODO: disable\n  },\n  {\n    name: 'snaredrum',\n    type: TrackType.drum,\n    instrument: 16,\n    divider: 1,\n    playType: PlayTypes.even,\n    muted: true, // TODO: disable\n  },\n  {\n    name: 'cin',\n    type: TrackType.drum,\n    instrument: 39,\n    divider: 4,\n    playType: PlayTypes.even,\n    muted: true, // TODO: disable\n  },\n  // {\n  //   name: 'korgbass',\n  //   type: TrackType.bass,\n  //   instrument: 376,\n  //   pitches: [30],\n  //   duration: 1,\n  //   divider: 4,\n  //   playType: PlayTypes.odd,\n  // },\n  {\n    name: 'korgbass 2',\n    type: TrackType.bass,\n    instrument: 371,\n    pitches: [30],\n    duration: 1,\n    divider: 4,\n    playType: PlayTypes.odd,\n    muted: true, // TODO: disable\n  },\n  {\n    name: 'quitar1',\n    type: TrackType.bass,\n    instrument: 307,\n    duration: 1,\n    divider: 2,\n    playBeat: [\n      50, 0, 53, 54, 55, 0, 50, 0,\n      50, 0, 53, 54, 55, 0, 50, 0,\n      50, 0, 53, 54, 55, 0, 50, 0,\n      51, 0, 54, 55, 56, 0, 52, 0,\n      // 0, 30, 0, 0, 32, 0, 30, 0,\n      // 0, 30, 0, 32, 36, 0, 30, 0,\n      // 0, 30, 0, 0, 30, 30, 0, 0,\n    ],\n    muted: true, // TODO: disable\n  },\n  ];\n\n  @computed public get drums() {\n    return this.tracks\n      .filter(track => track.type === TrackType.drum);\n  }\n\n  @computed public get drumInstrumentIds() {\n    return flattenArray(this.drums.map(track => track.instrument));\n  }\n\n  @computed public get bassers() {\n    return this.tracks\n      .filter(track => track.type === TrackType.bass);\n  }\n\n  @computed public get bassersInstrumentIds() {\n    return flattenArray(this.bassers.map(track => track.instrument));\n  }\n\n  @computed public get recordings() {\n    return this.tracks\n      .filter(track => track.type === TrackType.recording);\n  }\n\n  @action _update(track: TrackControlProps) {\n    console.log('_update', track);\n    this.tracks = this.tracks.slice().map(t => (t.name === track.name ? { ...t, ...track }: t));\n    console.log('this.tracks', this.tracks);\n  }\n\n  @action _remove(track: TrackControlProps) {\n    console.log('remove ', track);\n  }\n\n  @action _add(track: TrackControlProps) {\n    console.log('add new ', track);\n  }\n\n  // bind this\n  @action add = this._add.bind(this);\n\n  @action remove = this._remove.bind(this);\n\n  @action update = this._update.bind(this);\n\n  @action mute = this._update.bind(this);\n}\n","import {\n  computed, observable, action,\n} from 'mobx';\n\nexport default class MetronomeStore {\n  @computed public get step() {\n    return 0.0;\n  }\n}\n","import { createContext } from 'react';\nimport TrackStore from './TrackStore';\nimport MetronomeStore from './MetronomeStore';\n\n\nconst trackStore = new TrackStore();\nconst metronomeStore = new MetronomeStore();\nconst stores = {\n  trx: trackStore,\n  mtn: metronomeStore,\n};\n\n// Use the React context API so that the stores are available anywhere in the app\nexport default createContext(stores);\nexport { stores };\n","import React, { useEffect, useState, useContext } from 'react';\nimport DefaultLooperRenderer from './DefaultLooperRenderer';\nimport { LooperControls } from './LooperControls';\nimport LooperStyles, { Name } from './LooperStyles';\nimport { PlayBeatType, PlayTypes } from './model/types';\nimport { PitchedSound } from './model/stores/TrackStore';\nimport StoreContext from './model/stores';\n\nexport interface BeatStylesProps {\n  active: boolean;\n  enabled?: boolean;\n}\n\n\nexport interface LooperRendererProps {\n  playBeat: PlayBeatType;\n  step: number;\n  setPlayBeat?: (playBeat: PlayBeatType) => void;\n}\n\n\nexport interface BasicLooperProps {\n  playType?: PlayTypes;\n  rythmLength?: number; // needs to be injected\n}\n\nexport interface GeneratePlayBeatProps extends BasicLooperProps {\n  multiplier: number; // needs to be injected\n}\n\nexport interface LooperProps extends BasicLooperProps {\n  bpm?: number;\n  looping?: boolean;\n  source?: (arg0: PitchedSound) => void;\n  step?: number; // needs to be injected\n  metronomeBpm?: number;\n  render?: (props: LooperRendererProps) => JSX.Element;\n  playBeat?: PlayBeatType;\n  duration?: number;\n  name: string;\n  muted?: boolean;\n}\n\n\n// TODO: test\nconst generatePlayBeat = ({ playType, rythmLength, multiplier }: GeneratePlayBeatProps): number[] => {\n  const length = (rythmLength || 0) * multiplier;\n  switch (playType) {\n  case PlayTypes.odd:\n    return new Array(length).fill(0).map((_qwe, index) => 1 - (index % 2));\n  case PlayTypes.even:\n    return new Array(length).fill(0).map((_qwe, index) => index % 2);\n  case PlayTypes.oddQuarter:\n    return new Array(length).fill(0).map((_qwe, index) => (index % 4 ? 0 : 1));\n  case PlayTypes.evenQuarter:\n    return new Array(length).fill(0).map((_qwe, index) => (index % 4 === 2 ? 1 : 0));\n  case PlayTypes.first:\n    return new Array(length).fill(0).map((_qwe, index) => (index === 0 ? 1 : 0));\n  case PlayTypes.last:\n    return new Array(length).fill(0).map((_qwe, index) => (index === length - 1 ? 1 : 0));\n  case PlayTypes.all:\n  default:\n    return new Array(length).fill(1);\n  }\n};\n\n\nexport default ({\n  bpm,\n  metronomeBpm,\n  looping = true,\n  rythmLength,\n  playType = PlayTypes.odd,\n  playBeat: originalPlayBeat,\n  source,\n  step,\n  render: renderProp,\n  name,\n  duration,\n  muted,\n}: LooperProps) => {\n  const multiplier = (bpm && metronomeBpm && bpm / metronomeBpm) || 1;\n  const getStep = (step || 0) * multiplier;\n  const { trx } = useContext(StoreContext);\n  const LooperRenderer = renderProp || DefaultLooperRenderer;\n  const [playBeat, setPlayBeat] = useState((originalPlayBeat && originalPlayBeat.slice())|| generatePlayBeat({ playType, rythmLength, multiplier }));\n  const setMuted = () => trx.mute({ name, muted: !muted });\n\n  const playSource = () => {\n    if (playBeat[getStep] && source && !muted) {\n      source({ pitches: [playBeat[getStep]], duration });\n    }\n  };\n\n\n  useEffect(() => {\n    if (looping) {\n      playSource();\n    }\n  }, [step, looping]);\n\n  return (\n    <LooperStyles>\n      <Name>{name}</Name>\n      <LooperControls muted={!!muted} setMuted={setMuted} />\n      <LooperRenderer playBeat={playBeat} step={getStep} setPlayBeat={(thisPlayBeat) => setPlayBeat(thisPlayBeat)} />\n    </LooperStyles>\n  );\n};\n","import React, { useEffect, useState } from 'react';\n\nexport interface LooperProps {\n  bpm?: number;\n  looping?: boolean;\n  source?: () => void;\n  rythmLength?: number;\n  rythmDivider?: number;\n  children: JSX.Element | JSX.Element[] | any; // TODO: resolve not to use any for mapped Looper items\n}\n\nconst defaultRrythmLength = 8;\n// TODO: half & quarter rythm support\nexport const defaultBPM = 60;\n\nexport default ({\n  bpm = defaultBPM,\n  looping = true,\n  rythmLength = defaultRrythmLength,\n  rythmDivider = defaultRrythmLength * 2,\n  children,\n}: LooperProps) => {\n  const [start, setStart] = useState(new Date());\n  const [step, setStep] = useState(0.0);\n  const [metronome, setMetronome] = useState<number>(); // NodeJS.Timeout\n  const interval = (60 / bpm) * 1000; // we want to have /2, /4, /8 support\n\n  const init = () => {\n    setStart(new Date());\n  };\n\n  const calculateStep = () => {\n    const diff = (new Date().getTime() - start.getTime()) / interval;\n    const newStep = Math.floor(diff) % rythmLength;\n    const divider = Math.floor((diff - Math.floor(diff)) * rythmLength) / 8;\n    // console.log('step + divider', step, newStep + divider);\n    setStep(newStep + divider);\n  };\n\n  useEffect(() => {\n    if (looping) {\n      init();\n      // TODO: refactor metronome to global\n      if (metronome) clearTimeout(metronome);\n      // console.log('interval / rythmDivider', interval / rythmDivider);\n      setMetronome(setInterval(() => calculateStep(), interval / rythmDivider));\n    }\n  }, [interval, looping]);\n\n  const newChildren = React.Children.map(children, child => React.cloneElement(child, {\n    metronomeBpm: bpm,\n    step,\n    rythmLength,\n  }));\n\n  return (\n    <>\n      <h1>{step}</h1>\n      {newChildren}\n    </>\n  );\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { LooperRendererProps, BeatStylesProps } from './Looper';\n\n\nexport const RythmStyles = styled.div`\n  display: flex;\n`;\n\nexport const BeatStyles = styled.button<BeatStylesProps>`\n  border-radius: 4px;\n  border: solid 1px black;\n  background: gray;\n  margin: 3px;\n  flex: 1 1 auto;\n  height: 50px;\n  overflow: hidden;\n  color: #515e2d;\n\n  ${props => !props.enabled && props.active && `\n    background: #999;\n  `}\n\n  ${props => props.enabled && `\n    background: #515e2d;\n  `}\n  ${props => props.enabled && props.active && `\n    background: rgb(180,193,38);\n    background: radial-gradient(circle, rgba(180,193,38,1) 35%, rgba(112,125,76,1) 100%);\n  `}\n`;\n\n\nexport default ({ playBeat, step, setPlayBeat }: LooperRendererProps) => {\n  const updateBeat = (index: number) => {\n    if (!setPlayBeat) return ;\n    const newPlayBeat = playBeat.slice();\n    newPlayBeat[index] = !newPlayBeat[index] ? 1 : 0;\n    setPlayBeat(newPlayBeat)\n  };\n  return (\n    <RythmStyles>\n      {(playBeat && playBeat.map((beat, index) => <BeatStyles active={index === step} enabled={beat > 0} key={index} onClick={() => updateBeat(index)}>{beat}</BeatStyles>)) || null}\n    </RythmStyles>\n  );\n}\n","import styled from 'styled-components';\n\nexport default styled.section`\n  display: flex;\n  font-size: 2rem;\n  font-weight: bold;\n  align-items: center;\n  justify-content: flex-start;\n\n  ${props => props.title && `\n    &:before {\n      content: '${props.title}:';\n      text-decoration: underline;\n    }\n  `}\n\n  .MIDISounds {\n    margin: 0px 10px;\n    &>* {\n      display: flex;\n      align-items: center;\n\n      &:after {\n        content: 'config';\n        font-size: initial;\n      }\n    }\n    svg {\n      width: 40px;\n      height: 30px;\n    }\n  }\n`;\n","import React from 'react';\nimport { Piano, KeyboardShortcuts, MidiNumbers } from 'react-piano';\nimport 'react-piano/dist/styles.css';\n\nexport interface PianoKeyboardProps {\n  playNote: (number: number) => void;\n}\n\nexport default ({ playNote }: PianoKeyboardProps) => {\n  const firstNote = MidiNumbers.fromNote('c3');\n  const lastNote = MidiNumbers.fromNote('f5');\n  const keyboardShortcuts = KeyboardShortcuts.create({\n    firstNote: firstNote,\n    lastNote: lastNote,\n    keyboardConfig: KeyboardShortcuts.HOME_ROW,\n  });\n\n  return (\n    <Piano\n      noteRange={{ first: firstNote, last: lastNote }}\n      playNote={playNote}\n      stopNote={(midiNumber: number) => {\n        // console.log('stop midiNumber', midiNumber);\n      }}\n      width={document.body.clientWidth}\n      keyboardShortcuts={keyboardShortcuts}\n    />\n  );\n}","import React from 'react';\nimport styled from 'styled-components';\n\nconst RootControlsStyles = styled.div``;\n\nexport default () => (\n  <RootControlsStyles>\n    TODO:SLIDER\n  </RootControlsStyles>\n);","import React, { useState } from 'react';\nimport { Recorder } from 'vmsg';\n// import { ReactMic } from 'react-mic';\nimport _ from 'lodash.get';\n// import MicRecorder from 'mic-recorder';\n// import { Machine, interpret } from 'xstate';\n\nimport { ControlButton } from '../ControlButton';\nimport LooperStyles from '../LooperStyles';\n\nconst recorder = new Recorder({\n  wasmURL: 'https://unpkg.com/vmsg@0.3.0/vmsg.wasm',\n});\n\n\n// https://jonbellah.com/articles/xstate-react-hooks/\n// const recordState = Machine({\n//   id: 'record',\n//   initial: 'inactive',\n//   states: {\n//     inactive: { on: { start: 'recording' } },\n//     recording: { on: { stop: 'inactive' } },\n//   },\n// });\n\ninterface ReactMicStoppedProps {\n  blobUrl: string;\n}\n\nexport default () => {\n  const [recording, setRecording] = useState(false);\n  const [ready, setReady] = useState('');\n  // New instance\n  // const recorder = new MicRecorder({\n  //   bitRate: 128,\n  //   encoder: 'mp3', // default is mp3, can be wav as well\n  //   sampleRate: 44100, // default is 44100, it can also be set to 16000 and 8000.\n  // });\n\n  // const start = () => {\n  //   setRecording(true);\n  //   // Start recording. Browser will request permission to use your microphone.\n  //   console.log('recorder', recorder);\n  //   recorder.start().then(() => {\n  //     // something else\n  //   }).catch((e) => {\n  //     console.error(e);\n  //   });\n  // };\n\n  // const stop = () => {\n  //   setRecording(false);\n  //   console.log('recorder', recorder);\n  //   // Once you are done singing your best song, stop and get the mp3.\n  //   recorder\n  //     .stop()\n  //     .getAudio()\n  //     .then(([buffer, blob]) => {\n  //       // do what ever you want with buffer and blob\n  //       // Example: Create a mp3 file and play\n  //       console.log('buffer', buffer, blob);\n  //       // const file = new File(buffer, 'me-at-thevoice.mp3', {\n  //       //   type: blob.type,\n  //       //   lastModified: Date.now(),\n  //       // });\n\n  //       // const player = new Audio(URL.createObjectURL(file));\n  //       // player.play();\n  //     }).catch((e) => {\n  //       console.error('We could not retrieve your message');\n  //       console.log(e);\n  //     });\n  // };\n\n  const startRecording = async () => {\n    setRecording(true);\n    await recorder.initAudio();\n    await recorder.initWorker();\n    recorder.startRecording();\n  };\n\n  const stopRecording = async () => {\n    setRecording(false);\n    const blob = await recorder.stopRecording();\n    console.log('blob', blob.size);\n    await setReady('');\n    console.log('blob', URL.createObjectURL(blob));\n    setTimeout(() => setReady(URL.createObjectURL(blob)), 1000);\n  };\n\n  // const onStop = (recordedBlob: Blob) => {\n  //   const blobUrl = _(recordedBlob, 'blobURL', '');\n  //   setReady(blobUrl);\n  // };\n\n\n  return (\n    <LooperStyles>\n      {!recording && <ControlButton onClick={() => startRecording()}>Record</ControlButton>}\n      {recording && <ControlButton onClick={() => stopRecording()}>stop</ControlButton>}\n      {/* <ReactMic\n        record={recording}\n        visualSetting=\"sinewave\" // defaults -> \"sinewave\".  Other option is \"frequencyBars\"\n        // className={string}       // provide css class name\n        onStop={onStop} // called when audio stops recording\n        // onData={function}        // called when chunk of audio data is available\n        // strokeColor={string}     // sinewave or frequency bar color\n        // backgroundColor={string} // background color\n      /> */}\n      {ready && !recording && (\n        <audio controls src={ready}>\n          <track kind=\"captions\" />\n        </audio>\n      )}\n    </LooperStyles>\n  );\n};\n","import React, { useRef, useState, useContext } from 'react';\nimport { observer } from 'mobx-react';\nimport MIDISounds from 'midi-sounds-react';\n// import Looper from 'react-looper';\nimport Looper from './Looper';\nimport './App.css';\nimport Metronome from './Controls/Metronome';\nimport SquareLooperRenderer from './SquareLooperRenderer';\nimport Section from './Layout/Section';\nimport PianoKeyboard from './Layout/PianoKeyboard';\nimport RootControls from './Controls/RootControls';\nimport StoreContext from './model/stores';\nimport MicRecorder from './Controls/MicRecorder';\n\n\nconst App: React.FC = observer(() => {\n  const midiDrums = useRef<MIDISoundsType>(null);\n  const midiBass = useRef<MIDISoundsType>(null);\n  const midiKeys = useRef<MIDISoundsType>(null);\n  const [pianoChord, setPianoChord] = useState(847);\n  const [myBPM, setMyBPM] = useState(80);\n  const { trx } = useContext(StoreContext);\n\n  // TODO: strings Keys, , Strings\n  const playChord = (pitches: number | number[]) => {\n    if (midiKeys !== null && midiKeys.current !== null) {\n      const defaultPitches: number[] = [];\n      const playPitches = defaultPitches.concat(pitches);\n      midiKeys.current.playChordNow(pianoChord, playPitches, 0.5);\n    }\n  };\n\n  const cacheInstrument = (instrument: number) => {\n    console.log('trying to cache instrument', instrument);\n    if (midiKeys.current) {\n      midiKeys.current.cacheInstrument(instrument);\n      midiKeys.current.player.loader.waitLoad(() => playChord(50));\n    }\n    setPianoChord(instrument);\n  };\n  return (\n    <div className=\"App\">\n      set BPM: <input type=\"number\" value={myBPM} onChange={e => setMyBPM(parseInt(e.target.value, 10))} min={30} max={300} />\n      <RootControls />\n      <Metronome bpm={myBPM}>\n        <Section title=\"Drums\">\n          <MIDISounds ref={midiDrums} appElementName=\"root\" drums={trx.drumInstrumentIds} />\n        </Section>\n        {trx.drums.map(drum => <Looper {...drum} key={drum.name} bpm={myBPM * drum.divider} source={() => midiDrums.current && midiDrums.current.playDrumsNow([drum.instrument])} render={SquareLooperRenderer} />)}\n\n        <Section title=\"Bass\">\n          <MIDISounds ref={midiBass} appElementName=\"root\" instruments={trx.bassersInstrumentIds} />\n          {/* <input type=\"number\" value={bassChord} onChange={e => setBassChord(parseInt(e.target.value, 10))} min={366} max={446} /> */}\n        </Section>\n        {trx.bassers.map(chord => <Looper {...chord} key={chord.name} bpm={myBPM * chord.divider} source={({ pitches, duration }) => midiDrums.current && midiDrums.current.playChordNow(chord.instrument, chord.pitches || pitches || [30], duration || 1)} render={SquareLooperRenderer} />)}\n\n        <Section title=\"Voice\">\n          {trx.recordings.map(chord => <Looper {...chord} key={chord.name} bpm={myBPM * chord.divider} source={({ pitches, duration }) => midiDrums.current && midiDrums.current.playChordNow(chord.instrument, chord.pitches || pitches || [30], duration || 1)} render={SquareLooperRenderer} />)}\n          <MicRecorder />\n        </Section>\n      </Metronome>\n\n\n      <Section title=\"Keys\">\n        <MIDISounds ref={midiKeys} appElementName=\"root\" instruments={[1, 2, 3, 305, 847]} />\n        <input type=\"number\" value={pianoChord} onChange={e => cacheInstrument(parseInt(e.target.value, 10))} min={0} max={1393} />\n      </Section>\n\n      <PianoKeyboard playNote={(note) => playChord(note)} />\n    </div>\n  );\n});\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}